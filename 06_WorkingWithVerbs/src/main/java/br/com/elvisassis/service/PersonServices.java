package br.com.elvisassis.service;import br.com.elvisassis.data.dto.v1.PersonDTO;import br.com.elvisassis.data.dto.v2.PersonDTOV2;import br.com.elvisassis.exception.ResourceNotFoundException;import static br.com.elvisassis.mapper.ObjectMapper.parseListObjects;import br.com.elvisassis.mapper.custom.PersonMapper;import br.com.elvisassis.model.Person;import br.com.elvisassis.repository.PersonRepository;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service;import java.util.List;import java.util.concurrent.atomic.AtomicLong;@Slf4j@Servicepublic class PersonServices {    public PersonServices(PersonRepository personRepository, PersonMapper converter) {        this.personRepository = personRepository;        this.personMapper = converter;    }    private final AtomicLong counter = new AtomicLong();    //private Logger log = Logger.getLogger(PersonServices.class.getName());    private PersonRepository personRepository;    private PersonMapper personMapper;    public List<PersonDTO> findAll() {        log.info("Finding all Persons!");        var personDto = new PersonDTO();//        Implementação utilizando MapStruct//        List<PersonDTOV2> personDtos = personRepository.findAll().stream()//                .map(person -> person.toDto())//                .collect(Collectors.toList());//      Implementação utilizando Dozer Mapper        List<PersonDTO> personDtos = parseListObjects(personRepository.findAll(), PersonDTO.class);        return personDtos;    }    public PersonDTO findById(Long id) {        log.info("Finding one Person!");        PersonDTO personDto = personRepository.findById(id)                .orElseThrow(() -> new ResourceNotFoundException("No record found for this ID"))                .toDto();        return personDto;    }    public PersonDTO create(PersonDTO personDto) {        log.info("Creating one Person!");        Person entity = personDto.toEntity();        return personRepository.save(entity).toDto();    }    public PersonDTOV2 createV2(PersonDTOV2 personDTOV2) {        log.info("Creating one Person V2!");        Person entity = personMapper.convertDTOToEntity(personDTOV2);        return personMapper.convertEntityToDTO(personRepository.save(entity));    }    public PersonDTO update(PersonDTO personDto) {        log.info("Updatind one Person!");        Person entity = personRepository.findById(personDto.getId()).orElseThrow(() -> new ResourceNotFoundException("No record found for this ID"));        entity = personDto.toEntity();        return personRepository.save(entity).toDto();    }    public void delete(Long id) {        log.info("Deleting one Person!");        Person entity = personRepository.findById(id).orElseThrow(() -> new ResourceNotFoundException("No record found for this ID"));        personRepository.delete(entity);    }}